
5 > 3 > 1  must be investigated. And also, how does it work in C?

    if (oldlen > 0 && oldlen > newlen) {
